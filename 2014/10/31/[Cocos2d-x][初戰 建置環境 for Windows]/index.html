<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>[Cocos2d-x][初戰 建置環境 for Android on Windows] | Single.Bike.DSLR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Cocos2d-x 建置環境 for Android on Windows
我的環境是Windows 7 64bits CPU i5 M480
需先下載

apache ant                                Download
Android Development Tools                Download
Android ndk">
<meta property="og:type" content="article">
<meta property="og:title" content="[Cocos2d-x][初戰 建置環境 for Android on Windows]">
<meta property="og:url" content="http://blake31113.github.io/2014/10/31/[Cocos2d-x][初戰 建置環境 for Windows]/">
<meta property="og:site_name" content="Single.Bike.DSLR">
<meta property="og:description" content="Cocos2d-x 建置環境 for Android on Windows
我的環境是Windows 7 64bits CPU i5 M480
需先下載

apache ant                                Download
Android Development Tools                Download
Android ndk">
<meta property="og:image" content="https://lh5.googleusercontent.com/-XrTI4Dxj7XE/VFRYgMTZEeI/AAAAAAAAGOQ/SXLm4YHEBBE/w948-h533-no/Screenshot_2014-11-01-09-13-47.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[Cocos2d-x][初戰 建置環境 for Android on Windows]">
<meta name="twitter:description" content="Cocos2d-x 建置環境 for Android on Windows
我的環境是Windows 7 64bits CPU i5 M480
需先下載

apache ant                                Download
Android Development Tools                Download
Android ndk">

  
    <link rel="alternative" href="/atom.xml" title="Single.Bike.DSLR" type="application/atom+xml">
  
  
    <link rel="icon" href="/css/images/favicon.png" type="image/png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52738811-1', 'auto');
  ga('send', 'pageview');

</script>

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Single.Bike.DSLR</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">by Blake</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://blake31113.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-[Cocos2d-x][初戰 建置環境 for Windows]" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/10/31/[Cocos2d-x][初戰 建置環境 for Windows]/" class="article-date">
  <time datetime="2014-10-31T03:24:00.000Z" itemprop="datePublished">Oct 31 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      [Cocos2d-x][初戰 建置環境 for Android on Windows]
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
	  
		  
		  
			<h3 id="Cocos2d-x_建置環境_for_Android_on_Windows">Cocos2d-x 建置環境 for Android on Windows</h3>
<p>我的環境是Windows 7 64bits CPU i5 M480</p>
<h3 id="需先下載">需先下載</h3>
<ol>
<li>apache ant                                <a href="http://ftp.tc.edu.tw/pub/Apache//ant/binaries/apache-ant-1.9.4-bin.zip" target="_blank" rel="external">Download</a></li>
<li>Android Development Tools                <a href="https://developer.android.com/sdk/index.html" target="_blank" rel="external">Download</a></li>
<li>Android ndk                                <a href="http://dl.google.com/android/ndk/android-ndk-r9d-windows-x86_64.zip" target="_blank" rel="external">Download</a></li>
<li>Cocos2d-x                                <a href="http://www.cocos2d-x.org/filedown/cocos2d-x-3.3rc0.zip" target="_blank" rel="external">Download</a></li>
<li>python 2.7 version <strong>not 3.6 version</strong>    <a href="https://www.python.org/ftp/python/2.7.8/python-2.7.8.msi" target="_blank" rel="external">Download</a></li>
</ol>
<h3 id="安裝_python_2-7">安裝 python 2.7</h3>
<p>安裝python2.7後-&gt;按下下方工具列的<strong>開始</strong>-&gt;對電腦按右鍵-&gt;內容-&gt;進階系統設定-&gt;環境變數-&gt;系統變數中的PATH-&gt;編輯-&gt;在變數值中<strong>加入</strong>你所安裝python2.7的位置-&gt;最後加上，和其他數值分開<strong>※我的python位置放在C:\Python27，所以在變數值中加入C:\Python27;</strong></p>
<h3 id="Setup_Cocos2d-x">Setup Cocos2d-x</h3>
<p>把下載的另外三個檔案放入你指定的資料夾中<strong>※我是放在”D:\cocos2d”中</strong>，並解壓縮<br>使用Command Prompt並前往該資料夾，打入setup.py</p>
<figure class="highlight"><figcaption><span>in_Windows_Prompt</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">D:</div><div class="line"><span class="built_in">cd</span> cocos2d</div><div class="line">setup.py</div></pre></td></tr></table></figure>

<p>他會要求輸入其他三個的根目錄，依序是</p>
<ol>
<li>NDK_ROOT            <strong>※我的目錄為D:\Cocos2d\android-ndk-r9d</strong></li>
<li>Android_SDK_ROOT     <strong>※我的目錄為D:\Cocos2d\adt-bundle-windows-x86_64-20140702\sdk</strong></li>
<li>ANT_ROOT            <strong>※我的目錄為D:\Cocos2d\apache-ant-1.9.4\bin 記得是ant資料夾裡面bin的路徑</strong></li>
</ol>
<p>基本上Cocos2d-x這樣就設置完成了</p>
<h3 id="創建新的Project">創建新的Project</h3>
<p>在Cocos2d裡面鍵入</p>
<figure class="highlight"><figcaption><span>D:\\Cocos2d\\cocos2d-x-3.3rc0</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cocos.py new  testproject -p org.blake31113.testproject <span class="operator">-l</span> cpp <span class="operator">-d</span> D:\Cocos2d\Project</div></pre></td></tr></table></figure><br>在D:\Cocos2d\Project內建立testproject這個Project，<br>package name為org.blake31113.testproject，<br>language name 為 C++<br>destination 為 D:\Cocos2d\Project<br><br><strong>參照</strong><br><figure class="highlight"><figcaption><span>D:\\Cocos2d\\cocos2d-x-3.3rc0</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cocos.py new <span class="tag">&lt;<span class="title">project_name</span>&gt;</span> -p <span class="tag">&lt;<span class="title">package_name</span>&gt;</span> -l <span class="tag">&lt;<span class="title">language_name</span>&gt;</span> -d <span class="tag">&lt;<span class="title">destination</span>&gt;</span></div></pre></td></tr></table></figure>

<h3 id="Build_Project">Build Project</h3>
<p>進入Project中的proj.android並鍵入</p>
<figure class="highlight"><figcaption><span>D:\\Cocos2d\\Project\\testproject\\proj.android</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">build_native.<span class="keyword">py</span></div></pre></td></tr></table></figure>

<p>編譯可能會有段時間，<br>編譯完後，Project就建立並編譯&amp;建置完了</p>
<h3 id="將Project輸出apk並執行">將Project輸出apk並執行</h3>
<ol>
<li>打開剛剛下載的Android Development Tools(ADT)中的eclipse(in D:\Cocos2d\adt-bundle-windows-x86_64-20140702\eclipse)</li>
<li>按File-&gt;import-&gt;Android-&gt;Existing Android Code Into Workspace</li>
<li>按Browse-&gt;選擇Project資料夾(D:\Cocos2d\Project\testproject)-&gt;先按Deselect All-&gt;選擇cocos2d\cocos\platform\android\java和proj.android-&gt;Finish<br>(<strong>cocos2d\cocos\platform\android\java是cocos2d的library，之後輸出其他Project可以不用再import</strong>)</li>
<li>此時Project的圖示會有紅色驚嘆號，代表還有問題，eclipse會呼叫專案的build_native.py，再Compile Project一次</li>
<li>成功Compile完後，libcocos2dx和project的紅色驚嘆號和叉叉都會消失</li>
<li>檢查一下project內android的版本，如果是4.4W的話要換成4.4.2(API19)，否則會無法輸出(4.4W是給Android Wear的API)<br>(要換成4.4.2版:在Eclipse工具列上Windows-&gt;SDK Manager，選擇4.4.2 install，install完後，對Project按右鍵-&gt;Properties-&gt;Android-&gt;選擇4.4.2-&gt;Apply-&gt;OK)</li>
<li>檢查一下project內是否有Android Dependencies，有的話也會無法成功輸出，需要對Project按右鍵-&gt;Build_Path-&gt;Configure-&gt;Libraries-&gt;點選Android Dependencies-&gt;Remove-&gt;OK<br>(Ecilpse在Android4.0之後，如果Project是Android的Application，會自動加入Android Dependency)</li>
<li>將手機或平板插上，並將USB偵錯開啟</li>
<li>對Project按右鍵-&gt;Run as Android Application，選擇該裝置就OK了</li>
</ol>
<div class="separator" style="clear: both; text-align: center;">[<img src="https://lh5.googleusercontent.com/-XrTI4Dxj7XE/VFRYgMTZEeI/AAAAAAAAGOQ/SXLm4YHEBBE/w948-h533-no/Screenshot_2014-11-01-09-13-47.png" alt=""></div>


<p><strong>使用Genymotion做模擬，卻不能work，貌似因為Compile是透過armabi(ARM Application Binary Interface)而不是x86的，所以無法work</strong><br><strong>無法使用Genymotion的<a href="http://discuss.cocos2d-x.org/t/cocos2d-x-with-genymotion/9476/2" target="_blank" rel="external">詳細原因與解法</a></strong></p>

		  
	  
	</div>
    <footer class="article-footer">
      <a data-url="http://blake31113.github.io/2014/10/31/[Cocos2d-x][初戰 建置環境 for Windows]/" data-id="n2ngbgopnxzg8p6u" class="article-share-link">Share</a>
      
        <a href="http://blake31113.github.io/2014/10/31/[Cocos2d-x][初戰 建置環境 for Windows]/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/-Cocos2d-x/">[Cocos2d-x]</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/-分享/">[分享]</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2014/11/01/[Cocos2d-x][設置開發環境 Cocos2d-x in Visual Studio 2012 for Windows]/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          [Cocos2d-x][設置開發環境 Cocos2d-x in Visual Studio 2012 for Windows]
        
      </div>
    </a>
  
  
    <a href="/2014/07/12/[分享][Hexo][Hexo其它設定]/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">[分享][Hexo][Hexo其它設定]</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/-ACG/">[ACG]</a><span class="tag-list-count">56</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/-Cocos2d-x/">[Cocos2d-x]</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/-Hexo/">[Hexo]</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/-Linux-Kernel/">[Linux-Kernel]</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/-Ubuntu/">[Ubuntu]</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/-分享/">[分享]</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/-攝影/">[攝影]</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/-遊/">[遊]</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/-雜言/">[雜言]</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/-黑歷史/">[黑歷史]</a><span class="tag-list-count">121</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/11/17/[Linux-Kernel][新增System Call]/">[Linux-Kernel][新增System Call]</a>
          </li>
        
          <li>
            <a href="/2014/11/01/[Cocos2d-x][設置開發環境 Cocos2d-x in Visual Studio 2012 for Windows]/">[Cocos2d-x][設置開發環境 Cocos2d-x in Visual Studio 2012 for Windows]</a>
          </li>
        
          <li>
            <a href="/2014/10/31/[Cocos2d-x][初戰 建置環境 for Windows]/">[Cocos2d-x][初戰 建置環境 for Android on Windows]</a>
          </li>
        
          <li>
            <a href="/2014/07/12/[分享][Hexo][Hexo其它設定]/">[分享][Hexo][Hexo其它設定]</a>
          </li>
        
          <li>
            <a href="/2014/07/11/[分享][Hexo][Blogger migrate to Hexo]/">[分享][Hexo][Blogger migrate to Hexo]</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div id="recentcomments" class="dsq-widget">
	<p class="widget-title">Recent Comments</p>
	<div class="widget">
		<script type="text/javascript" src="http://blake31113.disqus.com/recent_comments_widget.js?num_items=10&hide_avatars=1&avatar_size=32&excerpt_length=100&hide_mods=0"></script>
	</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/02/">February 2013</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">July 2012</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/06/">June 2012</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07/">July 2010</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05/">May 2010</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">April 2010</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/02/">February 2010</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/01/">January 2010</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/11/">November 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/09/">September 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/08/">August 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/07/">July 2009</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">May 2009</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/04/">April 2009</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/03/">March 2009</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/02/">February 2009</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/01/">January 2009</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/12/">December 2008</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/11/">November 2008</a><span class="archive-list-count">16</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/10/">October 2008</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/09/">September 2008</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/08/">August 2008</a><span class="archive-list-count">41</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/07/">July 2008</a><span class="archive-list-count">20</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/-ACG/" style="font-size: 18.33px;">[ACG]</a><a href="/tags/-Cocos2d-x/" style="font-size: 11.67px;">[Cocos2d-x]</a><a href="/tags/-Hexo/" style="font-size: 13.33px;">[Hexo]</a><a href="/tags/-Linux-Kernel/" style="font-size: 10.00px;">[Linux-Kernel]</a><a href="/tags/-Ubuntu/" style="font-size: 10.00px;">[Ubuntu]</a><a href="/tags/-分享/" style="font-size: 16.67px;">[分享]</a><a href="/tags/-攝影/" style="font-size: 11.67px;">[攝影]</a><a href="/tags/-遊/" style="font-size: 11.67px;">[遊]</a><a href="/tags/-雜言/" style="font-size: 15.00px;">[雜言]</a><a href="/tags/-黑歷史/" style="font-size: 20.00px;">[黑歷史]</a>
    </div>
  </div>

  
    <p class="widget-title">Visitors</p>
	<div class="widget">
	<a href="http://info.flagcounter.com/HORO"><img src="http://s03.flagcounter.com/count/HORO/bg_FFFFFF/txt_000000/border_CCCCCC/columns_2/maxflags_12/viewers_0/labels_0/pageviews_1/flags_0/" alt="Flag Counter" border="0"></a>
	</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 Blake K.C. LIN<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'blake31113';
  
  var disqus_url = 'http://blake31113.github.io/2014/10/31/[Cocos2d-x][初戰 建置環境 for Windows]/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//go.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>